# Улучшенное распознавание текста из резюме

## Описание

Данный модуль предоставляет улучшенные возможности для распознавания текста из отсканированных документов, включая документы с рукописным текстом. Он включает в себя несколько специализированных классов для обработки изображений, распознавания рукописного текста и анализа структурированных форм.

## Основные компоненты

### 1. ImageProcessor

Класс для улучшенной предобработки изображений перед OCR:

- Адаптивная бинаризация
- Улучшение контраста с помощью CLAHE
- Удаление шума с сохранением деталей текста
- Коррекция наклона текста
- Сегментация текстовых блоков

### 2. HandwritingRecognizer

Специализированный класс для распознавания рукописного текста:

- Адаптивное распознавание с использованием нескольких методов обработки
- Сегментация текста на строки и слова
- Мультимасштабный анализ для разного размера текста
- Специальные настройки для разных типов полей (имена, даты, числа)

### 3. FormAnalyzer

Класс для анализа структурированных форм и документов:

- Автоматическое определение полей формы
- Извлечение данных из полей
- Распознавание таблиц
- Обработка структурированных документов

## Установка зависимостей

```bash
pip install -r requirements.txt
```

### Установка Tesseract OCR

#### macOS
```bash
brew install tesseract
brew install tesseract-lang
```

#### Ubuntu/Debian
```bash
sudo apt-get install tesseract-ocr
sudo apt-get install tesseract-ocr-rus tesseract-ocr-eng tesseract-ocr-tur
```

## Использование в веб-интерфейсе

В веб-интерфейсе HR-системы добавлена возможность выбора метода распознавания при повторной обработке резюме:

1. Откройте страницу просмотра кандидата
2. Нажмите кнопку "Повторно обработать" в блоке резюме
3. В появившемся модальном окне выберите один из методов распознавания:
   - Стандартный (автоматический выбор)
   - Рукописный текст (улучшенное распознавание)
   - Структурированная форма (анкета, таблицы)
   - Сегментация текста (для сложных макетов)
   - Мультимасштабный анализ (для разного размера текста)
4. Нажмите "Начать обработку"

## Тестирование функций распознавания

Для тестирования функций распознавания можно использовать скрипт `test_recognition.py`:

```bash
python test_recognition.py path/to/image.jpg --test all
```

Параметр `--test` может принимать следующие значения:
- `all` - тестировать все функции
- `image` - тестировать только ImageProcessor
- `handwriting` - тестировать только HandwritingRecognizer
- `form` - тестировать только FormAnalyzer

## Рекомендации по использованию

### Для стандартных печатных документов
Используйте стандартный метод распознавания. Он автоматически выбирает наиболее подходящий подход в зависимости от типа документа.

### Для документов с рукописным текстом
Используйте метод "Рукописный текст". Он применяет специальные алгоритмы для улучшения распознавания рукописного текста.

### Для структурированных форм и анкет
Используйте метод "Структурированная форма". Он автоматически определяет поля формы и таблицы, и извлекает из них данные.

### Для документов со сложным макетом
Используйте метод "Сегментация текста". Он разделяет документ на текстовые блоки и обрабатывает каждый блок отдельно.

### Для документов с текстом разного размера
Используйте метод "Мультимасштабный анализ". Он анализирует документ в разных масштабах для лучшего распознавания текста разного размера.